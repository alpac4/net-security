#LyX 2.3 created this file. For more info see http://www.lyx.org/
\lyxformat 544
\begin_document
\begin_header
\save_transient_properties true
\origin unavailable
\textclass ctex-article
\begin_preamble
% 如果没有这一句命令，XeTeX会出错，原因参见
% http://bbs.ctex.org/viewthread.php?tid=60547
\DeclareRobustCommand\nobreakspace{\leavevmode\nobreak\ }
\end_preamble
\options UTF8
\use_default_options true
\maintain_unincluded_children false
\language chinese-simplified
\language_package none
\inputencoding utf8-plain
\fontencoding global
\font_roman "default" "default"
\font_sans "default" "default"
\font_typewriter "default" "default"
\font_math "auto" "auto"
\font_default_family default
\use_non_tex_fonts false
\font_sc false
\font_osf false
\font_sf_scale 100 100
\font_tt_scale 100 100
\use_microtype false
\use_dash_ligatures false
\graphics default
\default_output_format pdf4
\output_sync 0
\bibtex_command default
\index_command default
\float_placement h
\paperfontsize default
\spacing single
\use_hyperref false
\papersize default
\use_geometry true
\use_package amsmath 1
\use_package amssymb 1
\use_package cancel 1
\use_package esint 1
\use_package mathdots 1
\use_package mathtools 1
\use_package mhchem 1
\use_package stackrel 1
\use_package stmaryrd 1
\use_package undertilde 1
\cite_engine basic
\cite_engine_type default
\biblio_style plain
\use_bibtopic false
\use_indices false
\paperorientation portrait
\suppress_date false
\justification true
\use_refstyle 1
\use_minted 0
\index Index
\shortcut idx
\color #008000
\end_index
\leftmargin 3.6cm
\topmargin 2.6cm
\rightmargin 3.6cm
\bottommargin 2.6cm
\secnumdepth 3
\tocdepth 3
\paragraph_separation indent
\paragraph_indentation default
\is_math_indent 0
\math_numbering_side default
\quotes_style english
\dynamic_quotes 0
\papercolumns 1
\papersides 1
\paperpagestyle default
\tracking_changes false
\output_changes false
\html_math_output 0
\html_css_as_file 0
\html_be_strict false
\end_header

\begin_body

\begin_layout Standard
\begin_inset Note Note
status open

\begin_layout Plain Layout
The below text refers to if we add 
\begin_inset Quotes eld
\end_inset

adobefonts
\begin_inset Quotes erd
\end_inset

 to the custom class options.
 The text is outdated and will be updated to reflect this change soon.
 The change was made because we no longer need proprietary fonts to compile
 this document.
 For example, it can be compiled with out-of-the-box TeX Live 2015.
\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Note Note
status open

\begin_layout Plain Layout
这是一份文章模板，如果要使用书籍或报告，请设置文档类为
\family sans
book (C\SpecialChar TeX
)
\family default
或者
\family sans
report (C\SpecialChar TeX
)
\end_layout

\end_inset


\end_layout

\begin_layout Title
网络安全大作业报告
\end_layout

\begin_layout Standard
\begin_inset VSpace 5cm*
\end_inset


\end_layout

\begin_layout Standard
\begin_inset Tabular
<lyxtabular version="3" rows="5" columns="2">
<features islongtable="true" longtabularalignment="center">
<column alignment="center" valignment="top" width="0pt">
<column alignment="left" valignment="top" width="0pt">
<row>
<cell alignment="center" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
作者：
\end_layout

\end_inset
</cell>
<cell alignment="left" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
王皓、易婧玮
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="left" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
学号：
\end_layout

\end_inset
</cell>
<cell alignment="left" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
PB16060885、PB16021503
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="left" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
选题：
\end_layout

\end_inset
</cell>
<cell alignment="left" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
ipatables及l7filter的使用
\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Newpage newpage
\end_inset


\end_layout

\begin_layout Abstract
这里是摘要内容。
\end_layout

\begin_layout Abstract
\begin_inset Newpage newpage
\end_inset


\end_layout

\begin_layout Abstract
\begin_inset CommandInset toc
LatexCommand tableofcontents

\end_inset


\end_layout

\begin_layout Abstract
\begin_inset Newpage newpage
\end_inset


\end_layout

\begin_layout Part
iptables
\end_layout

\begin_layout Section
简介
\end_layout

\begin_layout Subsection
iptables与netfilter
\end_layout

\begin_layout Standard
iptables其实不是真正的防火墙，我们可以把它看做一个客户端代理。用户通过iptables这个代理将，将用户的安全设定执行到netfilter中。netfi
lter才是真正的防火墙。netfilter是linux操作系统内部的一个数据包处理模块，它具有如下功能：数据包内容修改、数据包过滤的防火墙功能。
\end_layout

\begin_layout Subsection
链
\end_layout

\begin_layout Standard
进出报文从网卡到达用户空间需要经过多道关卡，这些关卡在ipatables中被称为链（chian），每个链上都放置了一串规则。图1简单形象地描述了一个数据包进出主
机时会经过的链：
\end_layout

\begin_layout Standard
\begin_inset Float figure
placement h
wide false
sideways false
status open

\begin_layout Plain Layout
\align center
\begin_inset Graphics
	filename assets/chain.png
	width 70line%

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
iptables链：发送方的数据包到达网卡后，在内核空间内先经过PREROUTING（转发前）链。当本机的内核支持IP_FORWARD时，数据包的目的地址个能不
是本机。若目标为本机，数据包进入INPUT链，否则进入FORWARD（转发）链和POSTROUTING（转发后）链。本机发送报文时，数据包先经过OUTPUT链，
再经过POSTROUTING链，最终经过网卡转发至其他主机。
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Subsection
表
\end_layout

\begin_layout Standard
具有相同功能的规则的集合叫做`表'。不同功能的规则，我们可以放置在不同的表中进行管理。iptables已为我们定义了4种表：
\end_layout

\begin_layout Description
filter表 负责过滤功能；
\end_layout

\begin_layout Description
nat表 负责网络地址转换功能；
\end_layout

\begin_layout Description
mangle表 拆解报文，作出修改，并重新封装；
\end_layout

\begin_layout Description
raw表 关闭nat表上启用的连接追踪机制。
\end_layout

\begin_layout Standard
每个链上的规则存在于不同的表如图2中：
\end_layout

\begin_layout Description
PREROUTING raw表、mangle表、nat表；
\end_layout

\begin_layout Description
INPUT mangle表、filter表；
\end_layout

\begin_layout Description
FORWARD mangle表、nat表、filter表；
\end_layout

\begin_layout Description
OUTPUT raw表、mangle表、nat表、filter表；
\end_layout

\begin_layout Description
POATROUTING mangle表、nat表。
\end_layout

\begin_layout Standard
\begin_inset Float figure
wide false
sideways false
status open

\begin_layout Plain Layout
\align center
\begin_inset Graphics
	filename assets/graph.png
	width 70line%

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
不同链上的规则允许存在的表
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout

\end_layout

\end_inset


\end_layout

\begin_layout Subsection
处理动作
\end_layout

\begin_layout Standard
处理动作在iptables被称为target，常用的有：ACCEPT、DROP、REJECT、SNAT、MASQUERADE、DNAT、REDIREACT、LO
G。
\end_layout

\begin_layout Section
实验
\end_layout

\begin_layout Subsection
命令
\end_layout

\begin_layout Subsubsection
查看命令
\end_layout

\begin_layout Standard

\end_layout

\begin_layout Part
l7filter
\end_layout

\begin_layout Standard
本模板来自谢益辉，若有任何疑问，请发邮件至xie@yihui.name或到 
\begin_inset Flex URL
status collapsed

\begin_layout Plain Layout

http://yihui.name
\end_layout

\end_inset

留言。注意前面已经声明，本文档默认设置为使用Adobe中文字体，如果你是Linux用户，这些字体很可能不存在，这种情况下请使用任意可用的非\SpecialChar TeX
中文字体。
\end_layout

\begin_layout Section
小结
\end_layout

\begin_layout Standard
本文档使用article (C\SpecialChar TeX
)文档类，语言设置为简体中文，编码使用UTF8，字体用Adobe中文字体，输出类型设置为Xe\SpecialChar TeX
。编译的时候中文与英文之间会自动加上空
格，方便阅读。
\end_layout

\end_body
\end_document
